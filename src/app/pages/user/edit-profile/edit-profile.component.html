<h2>Actualizar mis datos</h2>
<form [formGroup]="form" (ngSubmit)="save()" class="perfil-grid">
  <section class="bloque">
    <h3>Informaci√≥n Personal</h3>
    <div class="campos">
      <label>Nombre
        <input formControlName="nombre" placeholder="Nombre" [class.error]="form.get('nombre')?.invalid && form.get('nombre')?.touched"/>
      </label>
      <label>Apellidos
        <input formControlName="apellido" placeholder="Apellidos"/>
      </label>
      <label>Correo
        <input type="email" formControlName="email" placeholder="Correo" [class.error]="form.get('email')?.invalid && form.get('email')?.touched"/>
        <span class="error-message" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
          Ingresa un correo v√°lido
        </span>
      </label>
    </div>
    <h3>Tel√©fono</h3>
    <div class="campos">
      <label>C√≥digo de pa√≠s
        <input formControlName="telefonoCodigo" placeholder="+57"/>
      </label>
      <label>N√∫mero
        <input formControlName="telefono" placeholder="300 123 4567"/>
      </label>
    </div>
  </section>

  <section class="bloque">
    <h3>Cambiar contrase√±a</h3>
    <div class="campos">
      <label>Contrase√±a Actual
        <input type="password" formControlName="passwordActual" placeholder="Contrase√±a Actual"/>
      </label>
      <label>Contrase√±a Nueva
        <input type="password" formControlName="passwordNueva" placeholder="Contrase√±a Nueva"/>
      </label>
    </div>
    <button type="button" class="btn ghost" (click)="cambiarContrasena()" [disabled]="saving" [attr.aria-busy]="saving">
      {{ saving ? 'Cambiando...' : 'Cambiar contrase√±a' }}
    </button>
  </section>

  <section class="bloque">
    <h3>Descripci√≥n personal</h3>
    <label>
      <textarea rows="4" formControlName="descripcion" placeholder="Cu√©ntanos sobre ti..."></textarea>
    </label>

    <h3>Documentos legales</h3>
    <label class="file">
      <input type="file" (change)="onSubirDocumentos($event)" multiple accept=".pdf,.jpg,.jpeg,.png"/>
      <span>üìé Subir archivos (PDF, JPG, PNG)</span>
    </label>
    <ul class="lista-archivos" *ngIf="documentos.length > 0">
      <li *ngFor="let doc of documentos; let i = index" class="documento-item">
        <span>{{ doc }}</span>
        <button type="button" class="btn-remove" (click)="removeDocument(i)" title="Eliminar documento">
          ‚úï
        </button>
      </li>
    </ul>
    <p class="hint" *ngIf="documentos.length === 0">No hay documentos subidos</p>
  </section>

  <section class="bloque foto">
    <h3>Foto de perfil</h3>
    <div class="avatar">
      <img [src]="auth.currentUser()?.avatarUrl || '/icons/user.svg'" alt="avatar"/>
    </div>
    <label class="btn">
      <input type="file" accept="image/*" (change)="onSubirFoto($event)"/>
      üì∑ Subir foto de perfil
    </label>
    <p class="hint" *ngIf="fotoPerfilNombre">Seleccionado: {{ fotoPerfilNombre }}</p>
    <p class="hint" *ngIf="!fotoPerfilNombre">M√°ximo 2MB, formatos JPG/PNG</p>
  </section>

  <div class="guardar-row">
    <button type="submit" class="btn primary ancho" [disabled]="form.invalid || saving">
      {{ saving ? 'Guardando cambios...' : 'Guardar cambios' }}
    </button>
  </div>
</form>
