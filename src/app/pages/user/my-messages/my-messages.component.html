<section class="messages">
  <h1>Mis Mensajes</h1>
  <div class="list" *ngIf="!loading && !invalidReserva; else skeletonMsgs" style="max-height: 60vh; overflow: auto;">
    <article class="msg" *ngFor="let m of items">
      <div class="meta">
        <strong>{{ m.from }}</strong>
        <time>{{ m.date | date:'short' }}</time>
      </div>
      <p class="text">{{ m.text }}</p>
    </article>
    <div class="pager" style="display:flex; gap:8px; margin:8px 0;">
      <button class="btn" type="button" (click)="loadPage(page - 1)" [disabled]="page <= 0">Anterior</button>
      <button class="btn" type="button" (click)="loadPage(page + 1)">Siguiente</button>
    </div>
  </div>
  <ng-template #skeletonMsgs>
    <div *ngIf="invalidReserva" class="info-banner">Abre los mensajes desde una reserva espec√≠fica.</div>
    <div class="skeleton-msg"></div>
    <div class="skeleton-msg"></div>
    <div class="skeleton-msg"></div>
  </ng-template>
  <form class="composer" (submit)="$event.preventDefault(); send(input.value); input.value=''">
    <input #input type="text" placeholder="Escribe un mensaje..." [disabled]="sending"/>
    <button class="btn" type="submit" [disabled]="sending" [attr.aria-busy]="sending">{{ sending ? 'Enviando...' : 'Enviar' }}</button>
  </form>
</section>
